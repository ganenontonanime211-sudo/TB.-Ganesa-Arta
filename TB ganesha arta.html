<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>TB Ganesha Arta</title>
  <style>
    body { margin:0; font-family:Arial, sans-serif; background:#f9f9f9; color:#333; }
    header { background:linear-gradient(135deg,#007BFF,#00C851); padding:20px; color:white; text-align:center; font-size:1.5em; font-weight:bold; }
    .container { padding:20px; text-align:center; animation:fadeIn 0.5s ease; }
    button, a, select, input { padding:10px 16px; margin:6px; border:none; border-radius:8px; font-size:1em; transition:0.3s; text-decoration:none; display:inline-block; }
    button, a { cursor:pointer; }
    .btn-primary{background:#007BFF;color:white;box-shadow:0 4px 8px rgba(0,0,0,0.2);}
    .btn-success{background:#00C851;color:white;box-shadow:0 4px 8px rgba(0,0,0,0.2);}
    .btn-danger{background:#ff4444;color:white;box-shadow:0 4px 8px rgba(0,0,0,0.2);}
    .item-list{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:15px;margin-top:20px;}
    .item{background:white;padding:15px;border-radius:10px;box-shadow:0 2px 6px rgba(0,0,0,0.1);transition:transform 0.3s;}
    .item:hover{transform:translateY(-3px);}
    .floating-btn{position:fixed;bottom:20px;left:50%;transform:translateX(-50%);z-index:1000;display:none;padding:14px 24px;font-size:1.1em;}
    form{display:flex;flex-direction:column;gap:10px;max-width:400px;margin:0 auto;text-align:left;}
    input,textarea,select{border:1px solid #ccc;}
    footer{margin-top:40px;padding:20px;background:#f1f1f1;text-align:center;font-size:0.9em;color:#555;}
    @keyframes fadeIn{from{opacity:0;}to{opacity:1;}}
    .cart-items{margin:20px auto;max-width:400px;text-align:left;background:#fff;padding:15px;border-radius:8px;box-shadow:0 2px 6px rgba(0,0,0,0.1);}
    .cart-items ul{padding-left:20px;}
    .qty-btn{padding:4px 8px;margin:0 4px;border-radius:50%;font-size:0.9em;cursor:pointer;}
    #searchInput{padding:10px;width:80%;max-width:400px;border-radius:6px;border:1px solid #ccc;margin:10px auto;display:block;}
    #categorySelect{padding:10px;width:80%;max-width:400px;border-radius:6px;border:1px solid #ccc;margin:10px auto;display:block;}
    #notFound{color:red;margin-top:10px;display:none;}
  </style>
</head>
<body>
  <header>TB Ganesha Arta</header>

  <!-- Halaman 1 -->
  <div id="page1" class="container">
    <button class="btn-primary" onclick="goToPage('page2')">Lihat Item</button><br>
    <button class="btn-success" onclick="window.open('https://wa.me/628170402325','_blank')">üí¨ Chat via WhatsApp</button>
  </div>

  <!-- Halaman 2 -->
  <div id="page2" class="container" style="display:none;">
    <button class="btn-danger" onclick="goToPage('page1')">‚óÄ Kembali</button>
    <h2>Daftar Item</h2>

    <!-- üîç Pencarian + Kategori -->
    <input type="text" id="searchInput" placeholder="Cari barang..." onkeyup="filterItems()">
    <select id="categorySelect" onchange="filterItems()">
      <option value="all">Semua Kategori</option>
      <option value="bahan">Bahan Bangunan</option>
      <option value="alat">Alat</option>
      <option value="cat">Cat</option>
      <option value="lain">Lainnya</option>
    </select>
    <p id="notFound">Barang tidak ditemukan</p>

    <div class="item-list" id="itemList">
      <!-- 20 item -->
      <div class="item" data-category="bahan">Semen <br><button class="btn-primary" onclick="addToCart('Semen')">Pilih</button></div>
      <div class="item" data-category="bahan">Pasir <br><button class="btn-primary" onclick="addToCart('Pasir')">Pilih</button></div>
      <div class="item" data-category="bahan">Batu Bata <br><button class="btn-primary" onclick="addToCart('Batu Bata')">Pilih</button></div>
      <div class="item" data-category="bahan">Besi Beton <br><button class="btn-primary" onclick="addToCart('Besi Beton')">Pilih</button></div>
      <div class="item" data-category="bahan">Keramik <br><button class="btn-primary" onclick="addToCart('Keramik')">Pilih</button></div>

      <div class="item" data-category="alat">Palu <br><button class="btn-primary" onclick="addToCart('Palu')">Pilih</button></div>
      <div class="item" data-category="alat">Sekop <br><button class="btn-primary" onclick="addToCart('Sekop')">Pilih</button></div>
      <div class="item" data-category="alat">Meteran <br><button class="btn-primary" onclick="addToCart('Meteran')">Pilih</button></div>
      <div class="item" data-category="alat">Gergaji <br><button class="btn-primary" onclick="addToCart('Gergaji')">Pilih</button></div>
      <div class="item" data-category="alat">Bor Listrik <br><button class="btn-primary" onclick="addToCart('Bor Listrik')">Pilih</button></div>

      <div class="item" data-category="cat">Cat Putih <br><button class="btn-primary" onclick="addToCart('Cat Putih')">Pilih</button></div>
      <div class="item" data-category="cat">Cat Merah <br><button class="btn-primary" onclick="addToCart('Cat Merah')">Pilih</button></div>
      <div class="item" data-category="cat">Cat Biru <br><button class="btn-primary" onclick="addToCart('Cat Biru')">Pilih</button></div>
      <div class="item" data-category="cat">Thinner <br><button class="btn-primary" onclick="addToCart('Thinner')">Pilih</button></div>
      <div class="item" data-category="cat">Kuasa Cat <br><button class="btn-primary" onclick="addToCart('Kuasa Cat')">Pilih</button></div>

      <div class="item" data-category="lain">Paku <br><button class="btn-primary" onclick="addToCart('Paku')">Pilih</button></div>
      <div class="item" data-category="lain">Lem Kayu <br><button class="btn-primary" onclick="addToCart('Lem Kayu')">Pilih</button></div>
      <div class="item" data-category="lain">Kawat <br><button class="btn-primary" onclick="addToCart('Kawat')">Pilih</button></div>
      <div class="item" data-category="lain">Engsel Pintu <br><button class="btn-primary" onclick="addToCart('Engsel Pintu')">Pilih</button></div>
      <div class="item" data-category="lain">Obeng <br><button class="btn-primary" onclick="addToCart('Obeng')">Pilih</button></div>
    </div>

    <button id="isiForumBtn" class="btn-success floating-btn" onclick="goToPage('page3')">Isi Forum</button>
  </div>

  <!-- Halaman 3 -->
  <div id="page3" class="container" style="display:none;">
    <button class="btn-danger" onclick="goToPage('page2')">‚óÄ Kembali</button>
    <h2>Isi Forum Pemesanan</h2>
    <div id="cartDisplay" class="cart-items" style="display:none;">
      <h3>Item yang dipilih:</h3>
      <ul id="cartList"></ul>
    </div>
    <form id="orderForm">
      <input type="text" id="nama" placeholder="Nama Pembeli" required oninput="generateLink()">
      <input type="text" id="alamat" placeholder="Alamat Pembeli" required oninput="generateLink()">
      <textarea id="pesan" placeholder="Pesan untuk Penjual (Opsional)" oninput="generateLink()"></textarea>
    </form>
    <div id="adminLink" style="display:none; margin-top:15px;">
      <a id="admin1" href="#" target="_blank" class="btn-success">Kirim ke Admin</a>
    </div>
    <p id="statusMsg"></p>
  </div>

  <!-- Footer -->
  <footer>
    üìç Alamat Toko: 8926+FQV, Jl. Pelda Sugiono, Temon, Pandowoharjo, Kec. Sleman, Kabupaten Sleman, Daerah Istimewa Yogyakarta 55512 <br>
    üïí Jam Buka: 07.00 - 16.00 <br>
    üôè Terimakasih telah berbelanja
  </footer>

  <script>
    let cart = [];

    function goToPage(pageId) {
      document.querySelectorAll(".container").forEach(p => p.style.display = "none");
      document.getElementById(pageId).style.display = "block";
      if (pageId === "page3") updateCartDisplay();
    }

    function addToCart(item) {
      let found = cart.find(c => c.nama === item);
      if (found) found.qty++;
      else cart.push({ nama: item, qty: 1 });
      updateCartButton();
    }

    function changeQty(index, amount) {
      cart[index].qty += amount;
      if (cart[index].qty <= 0) cart.splice(index, 1);
      updateCartButton();
      updateCartDisplay();
    }

    function updateCartButton() {
      let btn = document.getElementById("isiForumBtn");
      btn.style.display = cart.length > 0 ? "block" : "none";
      btn.innerText = "Lanjut ke Forum (" + cart.length + " Item)";
    }

    function updateCartDisplay() {
      let cartDisplay = document.getElementById("cartDisplay");
      let cartList = document.getElementById("cartList");
      cartList.innerHTML = "";

      if (cart.length > 0) {
        cartDisplay.style.display = "block";
        cart.forEach((item, index) => {
          let li = document.createElement("li");
          li.innerHTML = `${item.nama} x${item.qty} 
            <button class="qty-btn btn-success" onclick="changeQty(${index},1)">+</button>
            <button class="qty-btn btn-danger" onclick="changeQty(${index},-1)">-</button>`;
          cartList.appendChild(li);
        });
        generateLink();
      } else {
        cartDisplay.style.display = "none";
        document.getElementById("adminLink").style.display = "none";
      }
    }

    function generateLink() {
      let nama = document.getElementById("nama").value;
      let alamat = document.getElementById("alamat").value;
      let pesan = document.getElementById("pesan").value;
      let statusMsg = document.getElementById("statusMsg");

      if (nama && alamat && cart.length > 0) {
        let cartText = cart.map(item => `- ${item.nama} x${item.qty}`).join("\n");
        let message = `üõí *Pesanan Baru*\n\nüë§ Nama: ${nama}\nüè† Alamat: ${alamat}\n\nüì¶ Pesanan:\n${cartText}\n\nüìù Catatan: ${pesan || "-"}\n\nüôè Terimakasih`;
        let phone = "628170402325";

        document.getElementById("admin1").href = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
        document.getElementById("adminLink").style.display = "block";
        statusMsg.innerHTML = "‚úÖ Silakan klik tombol untuk mengirim pesanan ke Admin.";
      } else {
        document.getElementById("adminLink").style.display = "none";
        statusMsg.innerHTML = "‚ùå Lengkapi form & pilih item untuk membuat link.";
      }
    }

    function filterItems() {
      let input = document.getElementById("searchInput").value.toLowerCase();
      let category = document.getElementById("categorySelect").value;
      let items = document.getElementById("itemList").getElementsByClassName("item");
      let found = false;

      for (let i = 0; i < items.length; i++) {
        let text = items[i].innerText.toLowerCase();
        let itemCategory = items[i].getAttribute("data-category");
        let matchText = text.includes(input);
        let matchCategory = (category === "all" || category === itemCategory);

        if (matchText && matchCategory) {
          items[i].style.display = "block";
          found = true;
        } else {
          items[i].style.display = "none";
        }
      }
      document.getElementById("notFound").style.display = found ? "none" : "block";
    }
  </script>
</body>
</html>
